<?xml version="1.0" encoding="UTF-8"?>
<topic template="Default" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../helpproject.xsd">
  <title translate="true">SVG Advanced Settings</title>
  <body>
    <header>
      <para styleclass="Heading1"><text styleclass="Heading1" translate="true">SVG Advanced Settings</text></para>
    </header>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">This dialog is invoked by a button on the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="SVG_Export_Dialog" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">SVG Export dialog</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">. The choices you make here are not project specific, but will be used for all SVG exports from Walls until the next time they are changed as part of the program&apos;s profile. Note that there is a </text><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Load Defaults</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> button which resets the controls to values that are currently &quot;hard coded&quot; into Walls. Those particular default settings have worked well for some test cases, but they may not be the ones recommended in future Walls releases. (Which is to say more testing is needed.)</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><image src="svg_advanced.gif" scale="100.00%" style="font-family:&apos;MS Sans Serif&apos;; font-size:8pt; color:#000000;"></image></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">The settings near the bottom of the dialog will be described first since they are the ones you&apos;re most likely to change. The controls in the top section, &quot;Adjustment of Merged Features&quot;, won&apos;t be used routinely, but interested users may want to experiment with them.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Preserve positions of labels and notes</text></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">The positions of station labels are determined, at least initially, by offsets specified in the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Map_Format_Options" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Printer: Map format Options</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> dialog. The settings in that dialog for overlap avoidance, however, are ignored; all labels and notes are normally written to the SVG, leaving you with an opportunity to manually adjust their positions if necessary. Enabling this option causes the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">individual</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> station-relative positions of both labels and notes to be inherited from a merged SVG if it has content in those layers -- possibly items you&apos;ve repositioned using Illustrator or another editor. A station label can also be deleted so that it doesn&apos;t reappear in a new export that merges the modified SVG. Notes are handled a bit differently. Whether or not a particular note exists in an exported SVG is always determined by Walls settings. (Notes can be omitted for stations with no flags or with only hidden flags -- see </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Flag_and_Marker_Symbols" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Flag and Marker Symbols</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">.) A note won&apos;t replace a label as it will on a printed map. When its position isn&apos;t inherited, the note is placed above and to the right of the station marker at offsets that depend on type size.</text></para>
    <para styleclass="Normal"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Decimal places in exported SVG file </text></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Most numeric values in the SVG text file, such as page coordinates for vectors, symbols, and artwork, will be written out with this number of places after the decimal point. The units are points (1/72 inches), the same units used in Adobe Illustrator&apos;s exported SVG files. (See a</text><link displaytype="text" defaultstyle="true" type="topiclink" href="SVG_Units_note" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">note</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> about this.) At normal scales, the quality of rendered artwork rather than geographic accuracy is the main consideration with this setting. File size is another consideration. Adobe&apos;s documentation suggests that 3 is the &quot;best choice for most files.&quot;</text></para>
    <para style="tabstops:24px left ;"></para>
    <para styleclass="Normal"><text styleclass="Normal" style="font-weight:bold;" translate="true">Include LRUD bars when vectors are exported </text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">When this box is checked, LRUD cross-section bars are written to a sublayer named &quot;w2d Lruds&quot; in the SVG file -- see </text><link displaytype="text" defaultstyle="true" type="topiclink" href="SVG_Layers" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">SVG Layer Definitions</link><text styleclass="Normal" translate="true">. </text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> The goal is to aid the drafting of wall outlines and cross sections (see below). In Walls2D the bars and vector lines are toggled on and off as a group.</text></para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal"><text styleclass="Normal" style="font-weight:bold;" translate="true">Draw cross section boxes for C-flagged LRUDs</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">With this option set, a rectangular box will be aligned with and drawn next to the cross-section bar whenever the &quot;C&quot; tag was used in the LRUD specification -- see </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Vector_Data_Lines" anchor="LRUD" styleclass="Normal" translate="true">LRUD Passage Dimensions</link><text styleclass="Normal" translate="true">.</text></para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal"><anchor id="Merged_Features" style="font-family:Arial; font-size:7pt; font-weight:bold; color:#0000a0;"></anchor><text styleclass="Subheader" translate="true">Adjustment of Merged Features</text></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Specified in this section of the dialog are the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">weighting parameters</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> used by Walls when adjusting artwork to conform to an evolving database of survey data.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Vectors used</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - When morphing a feature defined by a path object -- for example, a passage wall outline -- Walls examines each individual control point to determine the set of N survey vectors closest to it. The program then computes a new control point position by looking to see how those vectors have changed. The size, N, of the set is 6 by default, but you can specify any number between 1 and 10. Generally, a larger N will produce a smoother morphed result.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">In determining how much and in which direction to shift a control point, the vectors in the &quot;closest set&quot; don&apos;t all have the same degree of influence. The shift in a control point&apos;s position is actually computed as a </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">weighted</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> average of the shifts that would be dictated by the vectors individually. Note that the shift dictated by a vector acting alone preserves the point&apos;s perpendicular distance to the vector and also it&apos;s proportional distance along the vector&apos;s length. The formula used for computing a vector&apos;s weight is</text></para>
    <para style="text-align:center; tabstops:24px left ;"><image src="SVG_WEIGHT1.bmp" scale="100.00%" style="font-family:Arial; font-size:9pt; color:#000000;"></image></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">where </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">length</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> is the vector&apos;s horizontal length and </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">distance</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> is the horizontal distance between the vector (nearest point along its length) and the control point. The remaining terms in the formula are specified with the next three dialog settings.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Length exponent</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - Parameter </text><text style="font-family:Arial; font-size:9pt; font-weight:bold; font-style:italic; color:#000000;" translate="true">P </text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">specifies to what degree a vector&apos;s influence (or weight) increases with its horizontal length. If </text><text style="font-family:Arial; font-size:9pt; font-weight:bold; font-style:italic; color:#000000;" translate="true">P </text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">is zero, a vector&apos;s length is irrelevant provided it&apos;s no smaller than a specified minimum (see below). The default value for </text><text style="font-family:Arial; font-size:9pt; font-weight:bold; font-style:italic; color:#000000;" translate="true">P</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> is currently 0.5.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Distance exponent</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - Parameter </text><text style="font-family:Arial; font-size:9pt; font-weight:bold; font-style:italic; color:#000000;" translate="true">B</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> specifies to what degree a vector&apos;s influence drops off with its distance from the control point. This is perhaps the most important parameter to consider. The default setting is 2, but other values, say between 1.5 and 3, might be appropriate. A small value (coupled with a large N) would give a smoother result, but it could also assign too much weight to vectors completely &quot;out of view&quot; of the survey team member who sketched the cave feature. Conversely, a value too large can produce an occasional jump, or discontinuity, in a path that was originally smooth. This happens when the closest vector sets for two adjacent control points are significantly different in the way they have changed -- a &quot;bad&quot; vector present in one but not the other.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Distance offset</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - When the control point&apos;s distance to a vector is zero (or very close to zero) the vector&apos;s weight should be very large but certainly not infinite. Also, a large weight due to a near-zero distance can cause path discontinuities near where vectors (possibly more than one) and paths cross each other. A positive value entered here will help prevent this. The default offset is 0.01 (one centimeter).</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Minimum Hz length in meters of vectors used</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - Vectors with horizontal lengths smaller than this value will be ignored in all adjustment calculations; they will not take up membership slots in the set of N vectors closest to a control point. Ideally, whether or not a survey vector is significant should depend on where it&apos;s located, say in a big room as opposed to a narrow crawlway. Since the program can&apos;t distinguish between such environments, a compromise minimum length has to be chosen. The default value is one meter.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">I&apos;ve found that changes to the weighting parameters often have little noticeable effect on a map&apos;s appearance -- particularly when a high quality survey evolves through least-squares adjustments, a process that tends to smooth out local discrepancies between old and new data. Furthermore, the common situations where they might matter the most can be dealt with by other means. One such case is when major survey blunders are being corrected. Another is when passage detail exists far away from any survey shots, as in sketched passages that haven&apos;t actually been surveyed. In the first case, a manual touch-up in the region of the blunder is normally all that&apos;s needed. In the second case, inserting a few dummy shots (floated vectors) in the data and drawing should smooth things out nicely. The weighting parameters can usually be left at their defaults or at whatever you believe works best for a particular cave.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Adjust features when any station&apos;s coordinate changes...</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - A feature adjustment is considered unnecessary if the maximum difference between a vector&apos;s endpoint coordinate in the merged file and the corresponding coordinate in the database is less than this distance in meters. If an adjustment is required, the maximum distance actually found is reported when the operation completes (assuming you haven&apos;t chosen to launch Walls2D upon completion). The default maximum distance is 0.3 meters. This feature significantly speeds up a common operation: launching Walls2D with different views of an existing map.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Load Defaults</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - The choices you make in this dialog, if it&apos;s closed with &quot;OK&quot;, are remembered the next time you export an SVG. Click this button to temporarily discard those choices and reinitialize the fields with default settings. (The latter may not be optimal and will likely change in future program releases.) If you then decide you don&apos;t like the defaults, &quot;Cancel&quot; the dialog to keep your last saved settings.</text></para>
    <para style="tabstops:24px left ;"></para>
  </body>
</topic>
