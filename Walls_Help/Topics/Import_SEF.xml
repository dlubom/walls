<topic template="Default" lasteditedby="David" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../helpproject.xsd">
  <title translate="true">Importing SEF Files</title>
  <keywords>
    <keyword translate="true">Import of SMAPS 5.2 (SEF) Files</keyword>
  </keywords>
  <body>
    <header>
      <para styleclass="Heading1"><text styleclass="Heading1" translate="true">Importing SEF Files</text></para>
    </header>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">To import a SMAPS Exchange File (SEF), choose the </text><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">FILE | Import project...</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> menu option of Walls. &#160;The operation creates one </text><link displaytype="text" defaultstyle="true" type="topiclink" href="project_script_file" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">project script</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> (WPJ file) and a sequence of associated data files. &#160;The project script preserves the SMAPS directory hierarchy. &#160;The measurement data are brought over in their original, unconverted form -- at least to the extent allowed by the SEF format. &#160;Included are instrument units and corrections, #DATE directives, and LRUD passage dimensions. &#160;Shot &quot;types&quot;, if nonblank, are made into </text><link displaytype="text" defaultstyle="true" type="topiclink" href="segment_attributes" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">segment attributes</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">. For example, vectors to be excluded from length computations will appear in the segment tree under leaves labeled &quot;L&quot;. Such leaves are easily detached prior to your displaying statistics for a branch. &#160;Excluded shots (type &quot;X&quot;) are enclosed in comment blocks.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Note that the default &quot;relative pathname&quot; export option of SMAPS must have been used to create the SEF file. &#160;Also be aware that the first four letters of the specified project name (the SEF file name by default) will be used by Walls to generate the file names of possibly many separate </text><link displaytype="text" defaultstyle="true" type="topiclink" href="survey_data_files" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">SRV data files</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">. &#160;For example, POWELLS.SEF will ordinarily give rise to POWELLS.WPJ, POWE0001.SRV, POWE0002.SRV, etc. &#160;Any existing files with those names will be overwritten without warning.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">The import dialog offers the option to combine </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">adjacent</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> surveys in a SMAPS directory into a single file. &#160;This will create fewer files of larger size. With this option, individual survey names can still be represented as a component of the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="segment_attributes" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">segment attribute</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> assigned to vectors.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">When station names longer than eight characters are encountered during the import operation, a </text><link displaytype="text" defaultstyle="true" type="topiclink" href="name_prefix" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">prefixed</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> name is generated. &#160;For example, </text><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">NAME1234567</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> will become </text><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">NAM:E1234567</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">.</text><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true"> &#160;</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">This is necessary because the base name length is limited to eight characters in Walls. &#160;(SMAPS supports 12-character names.) &#160;The only consequence of this is that just the last eight characters of the original names will be seen in certain program dialogs. Also, the prefixes are optionally excluded from name labels on maps. The SRV data files and coordinate listings will have the full prefixed names.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Finally, Walls doesn&apos;t tolerate certain special characters in station names. &#160;In particular, the pound sign (#), colon (:), semicolon (;), and space character ( ) will be replaced with the ampersand (&amp;), vertical bar (|), at sign (@), and underline (_), respectively. &#160;For example, the prefixed name PEP:TEC100, as originally </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">exported</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> from Walls, will become PEP|TEC100 upon import. &#160;There is a remote possibility that such a replacement will cause a name conflict.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para styleclass="Normal"><text styleclass="Subheader" translate="true">SEF Import Limitations</text></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">The SEF import module, WALLISEF.DLL, was developed and tested with just a few large SEF files on hand -- notably Powell&apos;s Cave, provided by William Elliott (using SMAPS 5.2), and two other very instructive examples furnished by Mike Yocum. &#160;Importing an SEF file from a source other than SMAPS 5.2 (or Walls), even though it may technically conform to some written description of SEF, may not work as expected. &#160;In fact, as with many programs that claim to support standard formats (perhaps the worst offenders being commercial graphics programs), it&apos;s possible to export files from SMAPS that SMAPS itself can&apos;t import. &#160;Here are three problems for which I found no easy workarounds:</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Wrong Units Assumed for Length Values</text></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Different releases (or &quot;builds&quot;) of SMAPS v.5.2 can produce SEF files that differ only in how length values should be interpreted. Unfortunately, it&apos;s impossible for an importing program to tell them apart. This problem can affect you if the imported SEF file contains compass and tape surveys with metric units (or units different than the SMAPS default setting), and if the particular SMAPS module that produced it -- namely SEFOUT.EXE -- is dated earlier than Feb 16, 1993. &#160;Builds older than this date create files in which directives #mtunits and #atunits specify the units for shot lengths and LRUD distances, respectively. The #units directive has no relevance for file interpretation, even though the SMAPS documentation implies otherwise. &#160;Since all of the SEF files I had seen were evidently of this type, I originally designed the import function so that it would ignore the #units directive and instead use #mtunits and #atunits to ascertain the units of numbers appearing in the file. Since then, </text><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Larry Fish</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> (author of Compass) brought it to my attention that a later build of SMAPS v5.2 produces files in which the #units directive is used in the documented manner -- that is, it alone specifies the units of all linear measurements.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Therefore, during an import operation, the current version of Walls (v2 and above) will assume that the SEF file was produced by the most recent build of SMAPS 5.2. &#160;The SEF #units directive will be used to interpret length values in the file itself, while #mtunits and #atunits will determine the final units for their respective measurement types in the generated Walls project. This means, unfortunately, that older style SEF files may not import properly -- the likely case if any of the surveys use metric units. To work around this, you must do one of two things:</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">1) Manually edit the SEF file to insure that the proper #units directive is present in each #ctsurvey group. For example, insert &quot;#units meters&quot; if the numbers in the file actually are meters. &#160;The directive&apos;s absence will be interpreted as &quot;#units feet&quot;, regardless of what #mtunits and #atunits may indicate. &#160;Note that this solution requires that all length values in the #ctsurvey group (shot lengths, IT heights, and LRUD distances, etc.) have the same units, either feet or meters.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">2) Use a text editor to insert a single line, the following &quot;meta-directive&quot;, at the top of the file (starting in column one):</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">%VERSION 92</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">This special comment will tell the Walls import routine that an old-style SEF file is being dealt with. &#160;While solution 2) is the least trouble, it works only with the current version of Walls. &#160;If solution 1) is feasible at all, it should work with other programs claiming to read SEF, including SMAPS.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">The Corrected Backsight Problem</text></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">If a survey contains backsights, SMAPS fails to store in the SEF file the appropriate #compbs= and #incbs= directives that state whether or not backsights have been &quot;corrected&quot;. &#160;Consequently, if SMAPS later imports the file, it will choke on backsights that will no longer be interpreted as corrected versions. &#160;Since backsights need not be accompanied by corresponding foresights, we can&apos;t easily fix this problem by revising the import module in Walls. (No such fix would work very well for inclinations anyway.) &#160;The best workaround is to manually include the missing directives in the SEF file. &#160;Or you can import the data into Walls and look for individual surveys that cause &quot;FS/BS difference too large&quot; messages during compilation. &#160;(Walls will highlight the relevant data in an edit window.) &#160;Then, as you recognize that back-azimuths, for example, are obviously corrected, you would change the #Units parameter from &quot;TypeAB=N&quot; to &quot;TypeAB=C&quot;.</text></para>
    <para styleclass="Normal"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Wrong Units Assumed for Instrument Corrections</text></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">In SMAPS, a compass or clinometer correction is specified with the same units as that of the corresponding measurement. &#160;For example, a correction entered as &quot;480&quot; for a compass whose units are mils will be correctly processed as a 27-degree correction. &#160;However, in the exported SEF file, the correction appears as &quot;#fcc 480&quot;, even though all angular quantities in an SEF file are supposed to have degree units. &#160;Indeed, upon importing the file, SMAPS treats this as a 480-degree correction! &#160;Consequently, if your surveys have instrument corrections, and if the instrument&apos;s units are anything but degrees, the SRV files created from an SEF import will have comments like this: &quot;!CAUTION: Units for angular corrections may be wrong. Degrees assumed.&quot; &#160;After importing a large SEF file, you can use the project tree search feature to look for these comments.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Of course, in pointing out these problems, I don&apos;t mean to disparage SEF or SMAPS. Those quirks could easily be minor compared to the possible import failures caused by my own mistakes -- either in coding or in interpretation. &#160;It&apos;s more likely that you&apos;ll encounter one of those. &#160;Hopefully, the SEF import feature will improve as it&apos;s exercised on more data sets.</text></para>
    <para style="tabstops:24px left ;"></para>
  </body>
</topic>
