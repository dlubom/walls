<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../helpproject.xsl" ?>
<topic template="Default" lasteditedby="David" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../helpproject.xsd">
  <title translate="true">SVG Layer Definitions</title>
  <body>
    <header>
      <para styleclass="Heading1"><text styleclass="Heading1" translate="true">SVG Layer Definitions</text></para>
    </header>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">This topic should be reviewed by anyone who wants to use an external SVG editor, such as Adobe Illustrator, to decorate an exported SVG with artwork, then have that artwork incorporated in future exports -- </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">merged</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> exports -- from Walls. The details presented here aren&apos;t needed to simply export SVGs as you would metafiles, to view and print SVGs with Walls2D, or to perform merged exports using </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Source_SVG" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">source SVGs</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> decorated by someone else.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">The SVG export function places graphical content into specially named layers. The names are preserved when the SVG file is read and rewritten by Illustrator. (Note that a layer name, like </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Walls</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, will appear with an underline (&quot;_&quot;) instead of a space character in the SVG text file. You should avoid the underline character when manually entering layer or group names while in Illustrator.) During a merged export operation, when Walls reads back an SVG decorated with artwork, the layer names determine how the new content is to be treated when it&apos;s combined with revised survey data. Content outside of these layers is not automatically included in the new SVG that&apos;s written. This layer-specific treatment is described below and also in </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Adjustment_Brushed_Strokes" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Adjustment of Brushed Strokes</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text styleclass="Subheader" translate="true">Required Layers for Roundtripping</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">As will be explained in more detail below, the particular </text><text styleclass="Normal" style="font-style:italic;" translate="true">w2d</text><text styleclass="Normal" translate="true"> layer where artwork is found will determine how Walls adjusts it. For example, when you export a new merged SVG, it might have both a new scale and a different north arrow direction. The reason you would place passage-defining rocks and large boulders within a </text><text styleclass="Normal" style="font-style:italic;" translate="true">shp</text><text styleclass="Normal" translate="true"> sublayer instead of a </text><text styleclass="Normal" style="font-style:italic;" translate="true">sym</text><text styleclass="Normal" translate="true"> sublayer is to insure that their </text><text styleclass="Normal" style="font-style:italic;" translate="true">north-relative</text><text styleclass="Normal" translate="true"> orientations are preserved as much as possible. The adjustment will scale, translate, and rotate the objects as required. Also, unless the objects are enclosed in an </text><text styleclass="Normal" style="font-style:italic;" translate="true">unnamed</text><text styleclass="Normal" translate="true"> group within the </text><text styleclass="Normal" style="font-style:italic;" translate="true">shp</text><text styleclass="Normal" translate="true"> layer, their paths will also be </text><text styleclass="Normal" style="font-style:italic;" translate="true">reshaped</text><text styleclass="Normal" translate="true">, with each control point being shifted separately. By contrast, all </text><text styleclass="Normal" style="font-style:italic;" translate="true">sym</text><text styleclass="Normal" translate="true"> objects, including paths, are adjusted while preserving their </text><text styleclass="Normal" style="font-style:italic;" translate="true">page-relative</text><text styleclass="Normal" translate="true"> orientation. </text><text styleclass="Normal" style="font-style:italic;" translate="true">Sym </text><text styleclass="Normal" translate="true">objects are never reshaped, just translated and scaled. Also, </text><text styleclass="Normal" style="font-style:italic;" translate="true">sym</text><text styleclass="Normal" translate="true"> objects inside an unnamed group maintain their relative positions -- exactly what you would want for objects making up a cross section or ceiling height symbol.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#7f0000;" translate="true">Note for Illustrator Users:</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> Layers</text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">&#32;</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">and groups are different kinds of objects in Illustrator, with groups shown in white rather than gray in the layers palette (see image below). The SVG format, however, makes no distinction between layers and groups. As a result, the special SVG layers that Walls creates and operates on are interpreted by Illustrator as groups, not layers. Since targeting a group with new artwork can be less convenient than targeting a layer, it might be beneficial to manually </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">convert the groups you intend to work with into layers</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">. This would have to be done after each roundtripping operation with Walls. My intention is to release a plugin to accomplish this automatically. In the meantime you can do this by hand quite easily. See </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Converting_Groups_to_Layers" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Converting Groups to Layers in Illustrator</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><table rowcount="1" colcount="2" style="width:auto; cell-padding:0px; cell-spacing:0px; page-break-inside:auto; border-width:0px; border-spacing:0px; cell-border-width:0px; border-style:none; background-color:none; head-row-background-color:none; alt-row-background-color:none;">
      <tr style="vertical-align:top">
        <td style="width:268px;">
          <para styleclass="Normal"><image src="SVG_LAYERS.png" align="left" scale="100.00%" style="font-family:&apos;MS Sans Serif&apos;; font-size:8pt; color:#000000;"></image></para>
        </td>
        <td style="width:592px;">
          <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">When an SVG freshly exported from Walls is first opened in Illustrator CS1, the Layers palette (image at left) will show a sequence of layers reflecting the selections you made in the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="SVG_Export_Dialog" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">SVG Export dialog</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">.</text></para>
          <para style="tabstops:24px left ;"></para>
          <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Note:</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> Unlike the CS1 version, versions 10, CS2, and CS3 will have all these layers grouped under a parent layer named </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">Layer 1</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">. This is acceptable to Walls, which will ignore this outer layer during a merged export, but it does make the layer vs. group distinction more of an issue.</text></para>
          <para style="tabstops:24px left ;"></para>
          <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Although the layers are individually described below under </text><link displaytype="text" defaultstyle="true" type="topiclink" href="SVG_Layers" anchor="Layer_Descriptions" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Layer Descriptions</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, some general properties are worth noting first. While most layers are optional, their listing order in the Layers palette is important and should be maintained as you add artwork. Objects appearing higher in the list will be rendered after the objects beneath them are rendered, possibly obscuring them. (The listing order is reversed in the SVG file itself, where listing order matches rendering order.)</text></para>
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">&#32;</text></para>
          <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Layers for Interactive Access - </text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">The </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Walls</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Detail</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Survey</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Labels</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Flags</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Notes</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, and </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Grid</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layers are recognized by the integrated SVG viewer, Walls2D, where their display can be toggled on and off. This may affect your choice of what to place in each layer, either when exporting from Walls or when adding artwork.</text></para>
          <para style="tabstops:24px left ;"></para>
          <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Merged Layers - </text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">When an </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Adjustable_SVG" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">adjustable</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> SVG file without merged content is exported from Walls, the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Legend</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Walls</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Detail</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, and </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Mask</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layers are present but empty. It is within those four layers that you are expected to add artwork. (Note that these are &quot;unlocked&quot; layers in the example at left.) The </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Walls</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> and </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Detail</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layers each consist of two sublayers: one with a name ending in &quot;sym&quot; and another with a name ending in &quot;shp&quot;. The </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">sym</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layers will contain elements, such as text and symbols, that must maintain their shape and </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">page-relative</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> orientation during an adjustment by Walls. By contrast, the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">shp</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layers and the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Mask</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer will contain </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">paths</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, like cave wall outlines, whose control points must be adjusted individually. The </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">shp</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layers can also contain non-morphable objects which must maintain their shape and </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">north-relative</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> orientation. Finally, the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Legend</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer will be subject only to translation and scaling as a group. In any merged layer but the legend layer, the locations of &#160;objects will individually track the positions of nearby survey vectors.</text></para>
          <para style="tabstops:24px left ;"></para>
          <para styleclass="Normal"></para>
        </td>
      </tr>
    </table></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">In each of the merged layers you are free to define new sublayers or groups with names of your choosing. (If a group is named, the name must be unique within the document.) Their entire contents, including style attributes, will be preserved during roundtripping with Walls. The shapes and positions of contained objects, however, will be subject to adjustment if the survey data, map view, or scale changes. The specific features of the merged layers will be described below.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Inheriting Styles from Non-merged Layers</text></para>
    <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">The remaining layers (survey vectors, labels, flags, etc.) are always regenerated from project data during an export operation; you&apos;ll normally leave them untouched when adding artwork. Note, however, that there is an </text><link displaytype="text" defaultstyle="true" type="topiclink" href="SVG_Export_Dialog" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">SVG Export dialog</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> option named </text><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Preserve styles and colors</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">. If you leave that option enabled, the program will retrieve certain style attributes from layers in the merged SVG as opposed to taking them from current project settings. Those attributes could have originated from an earlier Walls export, from edits in Illustrator, of from manually editing the SVG as text. Here are the specific attributes inherited from the non-merged layers when the option is enabled:</text></para>
    <para styleclass="Normal"></para>
    <para style="margin-left:27px;"><table rowcount="9" colcount="2" style="width:auto; cell-padding:0px; cell-spacing:0px; page-break-inside:auto; border-width:0px; border-spacing:0px; cell-border-width:0px; border-style:none; background-color:none; head-row-background-color:none; alt-row-background-color:none;">
      <tr style="vertical-align:top">
        <td style="width:125px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Frame</text></para>
        </td>
        <td style="width:477px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">- </text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Ratio of outline stroke width to total frame width.</text></para>
        </td>
      </tr>
      <tr style="vertical-align:top">
        <td style="width:125px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Grid</text></para>
        </td>
        <td style="width:477px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">- </text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Color and stroke widths of major and minor grid lines.</text></para>
        </td>
      </tr>
      <tr style="vertical-align:top">
        <td style="width:125px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Notes</text></para>
        </td>
        <td style="width:477px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">- Typeface, size, and color as obtained from first-encountered note (first in SVG).</text></para>
        </td>
      </tr>
      <tr style="vertical-align:top">
        <td style="width:125px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Labels</text></para>
        </td>
        <td style="width:477px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">- </text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Typeface, size, and color as obtained from first-encountered label.</text></para>
        </td>
      </tr>
      <tr style="vertical-align:top">
        <td style="width:125px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Flags</text></para>
        </td>
        <td style="width:477px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">- </text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">All attributes of symbols assigned to named station flags including instance sizes.</text></para>
        </td>
      </tr>
      <tr style="vertical-align:top">
        <td style="width:125px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Markers</text></para>
        </td>
        <td style="width:477px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">- Station marker symbol and size as obtained from first-encountered instance.</text></para>
        </td>
      </tr>
      <tr style="vertical-align:top">
        <td style="width:125px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Vectors</text></para>
        </td>
        <td style="width:477px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">- Colors of all vectors and stroke width as obtained from first-encountered vector.</text></para>
        </td>
      </tr>
      <tr style="vertical-align:top">
        <td style="width:125px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Ref</text></para>
        </td>
        <td style="width:477px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">- Font point size of map title and georeference information.</text></para>
        </td>
      </tr>
      <tr style="vertical-align:top">
        <td style="width:125px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Background</text></para>
        </td>
        <td style="width:477px;">
          <para styleclass="Normal"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">- Background color (or passage color if there is a merged </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Mask</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer).</text></para>
        </td>
      </tr>
    </table></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Required Layers in the Merged SVG</text></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Layers in the above list that are present in a merged SVG are examined only for their style attributes and for information needed when adjusting artwork. Only </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Ref</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> and </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Vectors</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> are required to be present. (They are needed to correlate the merge file&apos;s contents with the project database.) In both merged and non-merged exports, the elements in these nine layers are rebuilt each time based on export options and the current state of the compiled project. The option to inherit styles, however, frees us from having to worry about display settings during merged exports that create adjusted, possibly zoomed views of an existing SVG source file. This will be a very common operation.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Size Scaling</text></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">When a new view of an existing SVG map is generated, any size attributes inherited from the merged SVG are actually scaled so that the apparent sizes (or thicknesses) of objects in world coordinate units remain the same. For example, a station marker that appears 30 cm wide in the merged SVG will also appear that large in the new SVG even though the map scales may be different. Likewise, the stroke thicknesses of passage outlines and other drawn objects in the merged layers will remain in constant proportion to the map&apos;s scale bar. The effect is the same as zooming interactively within the Walls2D viewer. Whenever this is not the effect you want for the non-merged layers, you should uncheck </text><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Preserve styles and colors</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> and set up the display attributes (font sizes, background color, etc.) in Walls prior to exporting. As for an initial non-merged export, this requires that you consider carefully the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Position_and_Scale_dialog" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Scale &amp; Position dialog</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> settings for the project item being reviewed and also the scales at which the SVG is likely to be viewed or printed. Remember that SVG images are rescalable and can be made interactive. Even if the SVG is too large to print in full detail, high-resolution, printable images can be made from smaller portions of it.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">Controlling Overlap of Labels and Notes</text></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Finally, there is another </text><link displaytype="text" defaultstyle="true" type="topiclink" href="SVG_Advanced_Settings" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Advanced SVG Export</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> option, &quot;Preserve Visibility and Positions of Labels&quot;, that causes station-relative offsets of both notes and labels to be inherited from the merged SVG. There is no automatic overlap control in SVG map labeling, but this feature allows you to manually adjust, while in Illustrator or another editor, the positions of individual elements in these layers to avoid severe cases of clutter. Specific station labels (but not notes) can be deleted as well. This means that if a vector endpoint exists in the merged SVG, but is missing a label, it will also not have one in the new SVG.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para styleclass="Normal"><anchor id="Layer_Descriptions" style="font-family:Arial; font-size:7pt; font-weight:bold; color:#0000a0;"></anchor><text styleclass="Subheader" translate="true">Layer Descriptions</text></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">The SVG document elements recognized by Walls are described below in the order they would appear in Illustrator&apos;s Layer window. This order is opposite the rendering order, or order of appearance within the SVG file itself. The names in bold type are the XML group id&apos;s that any SVG editor must preserve. Unless they are on grayed top-level layers, Illustrator sees these as </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">group</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> names rather than true sublayer names. When Illustrator reads back an SVG, the distinction between sublayers and groups is lost for all but the top-most layer or layers. (See </text><link displaytype="text" defaultstyle="true" type="topiclink" href="SVG_AI_Users" anchor="AI_Limitations" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Limitations and Workarounds</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> under Instructions for Illustrator Users.)</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Frame - </text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Consists only of a non-filled rectangle with black outline surrounding the view frame. The frame dimensions are always determined by Walls settings for the compiled branch at the time of export (</text><link displaytype="text" defaultstyle="true" type="topiclink" href="Position_and_Scale_dialog" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Scale &amp; Position</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">dialog). The outline stroke width, when not inherited from a source SVG, is taken from the frame&apos;s &quot;Line width&quot; setting in the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Map_Format_Options" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Printer: Map format Options</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> dialog. (A zero thickness omits the frame.) When it </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">is</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> inherited, it&apos;s actually the ratio of stroke width to frame width that&apos;s preserved. This causes the outline to look much the same as it did in the merged file when the new SVG is viewed full-screen.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Legend</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - A layer that&apos;s always present in an </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Adjustable_SVG" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">adjustable</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> SVG export, but empty unless a merged SVG has content in this layer. In the latter case, the layer will be duplicated in the merged export, including all symbols and their instances. You may want to use Illustrator to create at least a map title, scale, and north arrow in the legend layer. At least one text element is required if the layer is used at all. In a merged export, the entire layer will be translated and scaled so that the first-rendered text element has the same world (not page) coordinates. Unless a new plan view is being established (survey rotated), the world coordinates will in fact &#160;be unchanged for all elements. An exported zoomed view might contain no legend or just a partial legend, even though you&apos;ve chosen to include it. If the map&apos;s datum or zero reference in the merged file differs from that in the compiled data, the legend might be shifted entirely out of view. (In an adjustable SVG export the entire contents of the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Legend</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer is included, even if outside the frame.) Also, if you change the plan orientation, any north arrow in the legend layer will need to be manually revised in Illustrator. Note that the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Ref</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer (described below) will always contain the map title and georeferencing information.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">As with earlier Walls releases, the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Legend </text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">layer can optionally be positioned immediately above the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Walls</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer. Placing it above </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Grid</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, as described here, can result in more attractive maps -- especially if you use legend boxes (possibly with drop shadows). For an example of this, see the Tutorial Project sample.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Grid</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - Consists of horizontal and vertical lines of an optional 2-level square grid. The major grid interval in meters and the number of subintervals are always specified in the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="SVG_Export_Dialog" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">SVG export dialog</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">; they are never inherited from a source SVG. The grid&apos;s style, however, can be inherited. &#160;When not inherited, the stroke width of minor grid lines is the same as that used for survey vectors (0.03 times label type size) and the width of major grid lines is five times as large. The grid color, when not inherited, is the one specified on the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Segment_Page" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Segments page</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> of the Review dialog. The grid lines are always assigned an opacity value of 0.5, which makes them fainter and allows objects beneath them to show through.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Notes</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - An optional layer consisting of notes (text strings) that have been assigned to stations in Walls. If notes are exported at all, a note is omitted only when the associated station is unflagged (or with only hidden flags) and the option &quot;Hide notes for unflagged stations&quot; in the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Flag_and_Marker_Symbols" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Flag and Marker Symbols</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> dialog is checked. When not inherited, note color is specified as usual on the Segments page&apos;s </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Segment_Page" anchor="Segments_Control_Panel" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">control panel</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> and font size is specified in the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Map_Format_Options" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Printer: Map format Options</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> dialog. The typeface, however, is initially a Times New Roman italic font, but like the other attributes it can be inherited. A note, by default, is positioned above-right of the station marker to avoid obscuring the station&apos;s label, which is normally below-right. Positions of individual notes can be inherited as described above (Controlling Overlap of Labels and Notes).</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Labels</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - An optional layer consisting of text elements representing station names. Up to eight characters of the name prefix, with colon separator, is included whenever the option to show prefixes is enabled in the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Map_Format_Options" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Printer: Map format Options</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> dialog. This dialog is also be used to control the initial font size and station-relative offsets. Text color is specified on the Segments page&apos;s </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Segment_Page" anchor="Segments_Control_Panel" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">control panel</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">. The initial typeface is Arial but this, like all font properties, can be inherited from a merged SVG. Text overlap can be controlled manually as described above under Controlling Overlap of Labels and Notes. Unlike notes, labels deleted from a merged SVG will not be reintroduced in the new SVG when the preserve visibility option is selected. For initial SVG exports, label font size should be chosen carefully since it is also used to calculate an initial marker size and stroke width for vectors. For map scales of around 1:360 (1&quot;= 30 ft), I would suggest a font size of about five points.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Flags</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - An optional layer of symbols centered at stations that have been assigned the corresponding flag names in Walls. A flag symbol&apos;s initial style and appearance (visible or hidden) is controlled as usual from within the &#160;</text><link displaytype="text" defaultstyle="true" type="topiclink" href="Flag_and_Marker_Symbols" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Flag and Marker Symbols</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> dialog. In a merged export, both the symbol definitions and the sizes of their instances can be inherited, although instances for a particular named symbol will have the same size (the size of the first encountered instance in the source SVG). When an exported SVG is brought into Illustrator, the Symbol window will show the symbols used in this layer along with the station marker symbol and symbols used in other layers. Their names will be the actual flag names prefixed with an underline. Assigning the &quot;transparent&quot; style to a flag symbol in Walls produces an SVG symbol with &quot;fill-opacity&quot; 0.5. The effect is that station markers would be visible beneath assigned flags.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Survey</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - The parent layer of </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Markers</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> and </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Vectors</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">. Those sublayers are grouped to allow toggling of Survey visibility in Walls2D via a single control. They comprise the entire content of this layer.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="margin-left:24px; tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Markers</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - A sublayer of </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Survey</text><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">&#32;</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">containing instances of a station marker symbol named &quot;_m&quot;. Both the symbol definition and the sizes of its instances are inheritable from the first-encountered marker instance in a merged SVG. Otherwise the symbol is defined as a solid square with a color that&apos;s specified in the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Flag_and_Marker_Symbols" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Flag and Marker Symbols</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> dialog. When not inherited, the width of a marker instance is 0.133 times the point size of a station label. A marker layer is created each time vectors are exported, but a merged SVG doesn&apos;t have to have one.</text></para>
    <para style="margin-left:24px; tabstops:24px left ;"></para>
    <para style="margin-left:24px;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Lruds</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - A sublayer of </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Survey</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> that&apos;s present when you&apos;ve checked the box labeled &quot;Include LRUD bars when vectors are exported&quot; in the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="SVG_Advanced_Settings" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">SVG Advanced Settings</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> dialog. The color of the bars is not an inhertitable setting, but is always determined by what you have set for Passage Outlines on the Segments page. In Walls2D the bars and vector lines are toggled on and off as a group. Another advanced setting is support for cross-section outline boxes. If the &quot;C&quot; suffix was used when specifying an LRUD in the survey data, a rectangular box will accompany the bar. </text><text styleclass="Normal" translate="true"> The box is drawn one meter to the right of the bar&apos;s right endpoint as one looks toward the LRUD&apos;s facing direction. The Illustrator user will need to reposition and page-orient the box if required, draw the section, then reflect the whole thing about the vertical axis if the box was originally upside down. </text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">See</text><text styleclass="Normal" translate="true">&#32;</text><link displaytype="text" defaultstyle="true" type="topiclink" href="Vector_Data_Lines" anchor="LRUD" styleclass="Normal" translate="true">LRUD Passage Dimensions</link><text styleclass="Normal" translate="true">.</text></para>
    <para style="margin-left:24px; tabstops:24px left ;"></para>
    <para style="margin-left:24px; tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Vectors</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - A sublayer of </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Survey</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> containing the line segments that represent survey vectors. &#160;Only in non-adjustable exports is this layer not required. When not inherited, the line colors are specified as usual on the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Segment_Page" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Segments page</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> of the Review dialog. Different segments of the survey can have different colors, including any of the three gradient types. The stroke width, however, is initially 0.03 times the point size of a station label (or 0.01 pts, whichever is largest). The stroke width can also be inherited from the first-encountered vector in a merged SVG. In an </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Adjustable_SVG" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">adjustable</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> SVG export, each vector element has a specially constructed name, the XML id attribute, that uniquely identifies the two endpoint stations. This allows linkage to the Walls project database and makes adjustment of nearby map features possible.</text></para>
    <para style="margin-left:24px; tabstops:24px left ;"></para>
    <para style="margin-left:24px;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">There is a simple way to remove a vector&apos;s influence on the adjustment of features. For example, you may want to remove the effect of an overlying surface survey vector while not deleting it. You can do this in Illustrator by prefixing the path&apos;s existing name (the XML id) with a single space character. (The name will already have one starting space character if the vector&apos;s FROM station name begins with a digit.) In an SVG source file produced by Walls you&apos;ll need to do this by editing the SVG text -- except here you&apos;ll use the underline character (&quot;_&quot;) which corresponds to the space you would see in Illustrator. When you use this technique, be careful not to alter the remaining portion of the name.</text></para>
    <para style="margin-left:24px;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Walls</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - &#160;An optional parent layer that&apos;s present in an </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Adjustable_SVG" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">adjustable</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> SVG export, but empty unless a merged SVG has content in this layer (possibly drawn with Illustrator). It&apos;s intended for prominent map features, like passage wall outlines, which remain visible when the Detail layer is turned off in the Walls2D</text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">&#32;</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">viewer</text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">. </text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">All objects in this layer must belong to either of two sublayers:</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="margin-left:24px; tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Walls sym - </text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">An optional sublayer of </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Walls</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> containing symbol instances, text elements, and any path or group that can&apos;t be reshaped. It is here that you draw prominent map features like area names, geological symbols, passage cross sections, or anything whose survey-relative position must be maintained through translation and scaling alone. This is done by calculating a shift value for the center of the object&apos;s bounding box. (In determining a bounding box, Walls currently doesn&apos;t calculate the true extent of a text element; only the location of the bottom-left corner of the first character is considered.) Unlike passage wall outlines in the plan, which are subject to morphing, objects in this layer will maintain their shape and page-relative orientation during feature adjustment. Examples are the filled circles representing wells in Actun Kaua. After Illustrator 10 exports them to SVG, those objects are no longer easily identifiable as circles. Instead they are closed &quot;paths&quot; that are no different in SVG syntax from ordinary drawn columns or breakdown pieces. (This limitation of version 10 was removed in version CS, which exports a variety of basic SVG shapes, including ellipses.)</text></para>
    <para style="margin-left:24px; tabstops:24px left ;"></para>
    <para style="margin-left:24px; tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">In both of the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">sym</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layers (</text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Walls sym</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> and </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Detail sym</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">) an </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">unnamed group</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> is translated and scaled as if it were a single object. Furthermore, unlike a </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">shp</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer object, it maintains its </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">page-relative</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> orientation. Grouping a ceiling height number with its enclosing circle, for example, will prevent the number from becoming uncentered during an adjustment. Similarly, if you add details to a cross section, you&apos;ll want to group them with the cross section&apos;s outline. In Illustrator, an unnamed group is labeled &quot;&lt;group&gt;&quot; in the Layers palette.</text></para>
    <para style="margin-left:24px; tabstops:24px left ;"></para>
    <para style="margin-left:24px; tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Walls shp</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - An optional sublayer of </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Walls</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">. It is here that you draw prominent </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">reshapable</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> features like passage walls, large breakdown, and major water boundaries. They include anything you would like to still see when the Detail layer is toggled off in Walls2D. Such features are represented in both Illustrator SVG text as &lt;</text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">path&gt;</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> objects -- sequences of control points defining polylines or Bezier curves. During a merged SVG export, Walls updates each control point&apos;s position to fit the current best estimate for the cave survey. The latter could have changed since the features were drawn. By default, a shift value is computed for each control point that is a weighted average of the shifts in the six nearest survey vectors (their plan projections). This vector count, along with other weighting parameters, are options in the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="SVG_Advanced_Settings" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Advanced SVG Export Settings</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> dialog.</text></para>
    <para style="margin-left:24px; tabstops:24px left ;"></para>
    <para style="margin-left:24px; tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Similarly to the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">sym</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layers, the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">shp</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layers (</text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Walls shp</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> and </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Detail shp</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">) can also have non-morphable objects such as symbols, text, and paths in unnamed groups. Unlike such objects in the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">sym</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layers, however, &#160;these </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">shp</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer objects maintain their orientation with respect to the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">survey coordinate system</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, not the page. For example, in the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">shp</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layers you&apos;ll place path-aligned text and </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">symbols </text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">representing large rocks and breakdown. (For efficiency sake, you should define and use symbols whenever possible. Note that different symbol instances can be transformed in different ways.)</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Detail</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - An optional parent layer that&apos;s present in an </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Adjustable_SVG" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">adjustable</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> SVG export, but empty unless a merged SVG has content in this layer (possibly drawn with Illustrator). It&apos;s intended for less prominent, small-scale map features -- anything you may want to hide from view when the map is presented at smaller scales or magnification. All objects in this layer must belong to either of two sublayers:</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="margin-left:24px; tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Detail sym</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - An optional sublayer of </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Detail</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> intended </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">non-reshapable</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> features whose visibility you may need to control independently of the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Walls sym</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer. Candidate objects are ceiling heights, depth indicators, and representations of floor material like clay. The layer could contain symbol instances for geological, biological, or historical content if the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Flag</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer isn&apos;t being used for this purpose. Since the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Flag</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer will be rewritten (or entirely omitted) in a Walls export, you might want to move certain flag symbols to </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Detail sym</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, possibly replacing them with fancier icons from Illustrator&apos;s symbol pallette. You&apos;ll also want to place cross sections in this sublayer since only their positions, not shapes, should depend on the locations of nearby survey vectors.</text></para>
    <para style="margin-left:24px; tabstops:24px left ;"></para>
    <para style="margin-left:24px; tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Detail shp</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - An optional sublayer of </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Detail</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, which is available for drawing both </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">reshapable </text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">and non-page oriented features whose visibility you may need to control independently of the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Walls shp</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer. Candidate objects are slope lines, dome and drop indicators, stream courses, pools, and breakdown. Like in </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Walls shp</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">, such objects can be either drawn or placed as symbol instances. In either case their orientation with respect to the survey is preserved.</text></para>
    <para style="margin-left:24px; tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><anchor id="w2d_Mask" style="font-family:Arial; font-size:6pt; color:#000000;"></anchor><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Mask</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - An optional layer which is treated during merge operations exactly like </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Walls shp</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> and </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Details shp</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">. Its visibility, however, can&apos;t be toggled off in the Walls2D viewer. &#160;As with the other layers intended to contain artwork, an empty </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Mask</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer is produced by a non-merged SVG export from Walls.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">One reason for having such a layer is that it&apos;s often desirable to have different background colors for the cave interior (passage floor) and the non-cave regions. The way to accomplish this is to store in </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Mask</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> a duplicate of those paths in the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Walls shp</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer that define </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">passage outlines</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">. The copy should then be modified as follows:</text></para>
    <para style="tabstops:24px left ;"></para>
    <list id="1" type="ul" listtype="bullet" formatstring="&#183;" format-charset="SYMBOL_CHARSET" levelreset="true" legalstyle="false" startfrom="1" style="text-indent:-24px; margin-left:24px; tabstops:24px left ; font-family:Symbol; font-size:9pt; color:#000000;">
      <li style="text-indent:-24px; margin-left:24px; tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Connect all paths forming the outer wall of the cave, creating a single closed outline path. Position this path as the lowermost path in the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Mask</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer (or of a named group in that layer). Give the path a fill color that represents the floor of the cave. This color will be referred to as the &quot;passage&quot; color.</text></li>
      <li style="text-indent:-24px; margin-left:24px; tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Close off all open paths located inside the cave outline, forming closed paths surrounding non-cave regions such as columns. Give all the interior closed paths a fill color that&apos;s different from the passage color. Normally this will be the map&apos;s background color. (See </text><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Background</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">.)</text></li>
      <li style="text-indent:-24px; margin-left:24px; tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Finally, assign no stroke to all paths in the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Mask</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer.</text></li>
    </list>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><table rowcount="1" colcount="2" style="width:auto; cell-padding:0px; cell-spacing:0px; page-break-inside:auto; border-width:0px; border-spacing:0px; cell-border-width:0px; border-style:none; background-color:none; head-row-background-color:none; alt-row-background-color:none;">
      <tr style="vertical-align:top">
        <td style="width:270px;">
          <para styleclass="Normal"><image src="MASKLAYER.bmp" scale="100.00%" style="font-family:Arial; font-size:9pt; color:#000000;"></image></para>
        </td>
        <td style="width:377px;">
          <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">The mask layer should be organized into one or more named or unnamed </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">groups</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> of closed paths. The lowermost (first-drawn) path in a group will be recognized as an </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">outer</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> path, which is normally filled with the passage floor color. The remaining paths in each group, the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">inner</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> paths, can be filled with a different color, usually the map&apos;s background color when the inner paths represent columns or non-passage regions. Such grouping makes it easier to represent multiple disconnected caves in the SVG and also facilitates exporting to shapefile format as described below.</text></para>
          <para styleclass="Normal"></para>
        </td>
      </tr>
    </table></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">The mask layer has another important purpose. &#160;When compiling project data, Walls will optionally process (adjusting if necessary) an attached source SVG containing a mask layer. The program can then draw SVG-based, rather than LRUD-based, passage outlines on its displayed and printed maps without utilizing the Walls2D viewer. (See </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Style_of_Wall_Drawing" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Passage Display Options</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">.) The image detail and quality isn&apos;t as good as that of the complete SVG rendered by Walls2D (which uses Adobe&apos;s plug-in), but the operation is much faster. When drawing the passages, Walls observes the settings on the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Segment_Page" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Segments page</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> that specify passage floor color and background color. Those colors are then used to replace the corresponding colors in a processed SVG. (The fill color of the lowermost path in </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Mask</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> is considered the SVG&apos;s passage floor color. In the example above, this is the fill color of the bottom path in &quot;Dry Passage&quot;.) The passage outline pen style and color can also be specified on the Segments page.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Finally, one of the five shapefile types that can be chosen during a </text><link displaytype="text" defaultstyle="true" type="topiclink" href="ESRI_Shapefiles" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">shapefile export</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> operation are the passage outlines. A shapefile of this type will consist of polygons constructed from the closed paths in the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Mask</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer. Each group of outer and inner paths will be stored as a record in the shapefile, and the name of the group (concatenated with parent group names, if present) will be stored as a field in the shapefile&apos;s table component. Additional table fields are SVG file name and total floor area in square meters.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">One feature of the shapefile export worth noting is that the colors assigned to inner paths in the SVG are ignored. Each shapefile record, which consists of one outer polygon grouped with zero or more inner polygons, is assigned one fill color attribute (which can be &quot;no color&quot;). If it&apos;s used as the basis of color assignments in ArcView, the outer polygons will be filled with those colors while the inner polygons will produce &quot;holes&quot; in the outer polygons. The above example gets around this restriction by placing Cenote Sagrado&apos;s &quot;Entrance&quot; and &quot;Lake Surface&quot; outlines in their own groups. This way, both will be treated as outer polygons. If the single path in &quot;Entrance&quot; had been grouped with the one in &quot;Lake Surface&quot; (but positioned just above it), it would be treated as an inner polygon. While Walls would show it as light blue (above the darker blue of the lake), ArcView would show it as a hole with no color. For the same reason, the individual paths in &quot;Lakes&quot; are placed in their own unnamed groups. This feature of ArcView is usually an advantage instead of a limitation. The &quot;holes&quot; in a cave floor allow other layers, such as background images, to show through.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Symbols</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - This layer is produced by Walls in an </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Adjustable_SVG" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">adjustable</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> SVG export where the source SVG contains added symbol definitions. It contains one instance of each symbol -- all positioned near the upper left corner of the page. The layer&apos;s only purpose is to work around an Illustrator CS bug. (When importing SVG, it obtains some symbol attributes, such as geometric transformations, from the first-encountered instance instead of the actual symbol definition.) After opening the SVG in Illustrator, you can delete this layer if you wish. You may want to keep it if you plan to roundtrip Illustrator&apos;s own SVG files as opposed to passing them through Walls -- something you should try to avoid for other reasons as well. See </text><link displaytype="text" defaultstyle="true" type="topiclink" href="SVG_AI_Users" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Instructions for Illustrator Users</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Ref</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - A required &quot;metadata&quot; layer consisting of a single text element positioned at the lower left corner of the frame. It&apos;s part of every SVG exported from Walls and a file must have it to be accepted in a merge operation. The text consists of a map title and information used by Walls and Wall2D for georeferencing -- specifically the plan view (degrees), scale ratio, region width and height (meters), and center coordinates (meters). The format of this line of text must not be altered outside of Walls. The type size, however, can be inherited in a merge operation. Otherwise it&apos;s a setting in the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Map_Format_Options" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">Printer: Map format Options</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> dialog (Fonts - Frame section). For an interactive map, I suggest a size that makes the text barely readable at maximum zoom level. A black Arial typeface is always assigned by the export function. You may want to hide the text completely if you have a legend. This can be done manually by finding line &quot;&lt;g id=&apos;w2d Ref&apos;&gt;&quot; in the SVG text file and changing it to &quot;&lt;g id=&apos;w2d Ref&apos; display=&apos;none&apos;&gt;&quot;. The effect is the same as toggling the visibility of this layer off in Illustrator before saving the document.</text></para>
    <para style="tabstops:24px left ;"></para>
    <para style="tabstops:24px left ;"><text style="font-family:Arial; font-size:9pt; font-weight:bold; color:#000000;" translate="true">w2d Background</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> - A required layer consisting of a single filled rectangle (no outline) which defines the map extent. The fill color, when not inherited from a merged SVG, is taken from the current background color setting for a displayed map in Walls. (See, for example, the Segments page&apos;s </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Segment_Page" anchor="Segments_Control_Panel" style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">control panel</link><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true">.) If the color happens to be white (either specified or inherited) </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">and</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> the passage color of the </text><text style="font-family:Arial; font-size:9pt; font-style:italic; color:#000000;" translate="true">w2d Mask</text><text style="font-family:Arial; font-size:9pt; color:#000000;" translate="true"> layer is also white, then another style attribute, opacity, is assigned a value of zero by the export function. That&apos;s simply to make the map look less &quot;washed out&quot; when it&apos;s viewed in Walls2D or Adobe&apos;s SVG viewer -- a fix that apparently doesn&apos;t degrade performance. (Setting the fill attribute to &quot;none&quot; was not an option since a filled background is required for mouse movement to be detected.)</text></para>
  </body>
</topic>
